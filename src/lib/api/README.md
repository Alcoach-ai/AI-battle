# Mock API Server

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–æ–∫-—Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è RLArena.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

### üìÅ –§–∞–π–ª—ã

- `types.ts` - TypeScript —Ç–∏–ø—ã –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
- `mockServer.ts` - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–∫-—Å–µ—Ä–≤–µ—Ä–∞ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- `client.ts` - API –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º
- `index.ts` - –≠–∫—Å–ø–æ—Ä—Ç—ã –º–æ–¥—É–ª—è

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

```typescript
import { apiClient } from '$lib/api';

// –õ–æ–≥–∏–Ω
const response = await apiClient.login({
	email: 'ivan@example.com',
	password: 'Password123!'
});

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
const response = await apiClient.register({
	name: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω–æ–≤–∏—á',
	email: 'new@example.com',
	password: 'Password123!',
	termsAccepted: true
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
const profile = await apiClient.getProfile();

// –í—ã—Ö–æ–¥
await apiClient.logout();
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å stores

```typescript
import { apiClient } from '$lib/api';
import { userStore } from '$lib/stores/user/userStore';

// –í loginStore –∏–ª–∏ registerStore
const response = await apiClient.login(credentials);
if (response.success && response.data) {
	userStore.setUser(response.data.user);
}
```

## üß™ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–ú–æ–∫-—Å–µ—Ä–≤–µ—Ä —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 1

- **Email:** `ivan@example.com`
- **–ü–∞—Ä–æ–ª—å:** `Password123!`
- **–ò–º—è:** –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á
- **–†–µ–π—Ç–∏–Ω–≥:** 1500

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 2

- **Email:** `anna@example.com`
- **–ü–∞—Ä–æ–ª—å:** `SecurePass456!`
- **–ò–º—è:** –ü–µ—Ç—Ä–æ–≤–∞ –ê–Ω–Ω–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞
- **–†–µ–π—Ç–∏–Ω–≥:** 1200

## üì° API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

#### `POST /api/auth/login`

–õ–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ó–∞–ø—Ä–æ—Å:**

```typescript
{
	email: string;
	password: string;
}
```

**–û—Ç–≤–µ—Ç:**

```typescript
{
  success: boolean;
  data?: {
    user: User;
    token: string;
    refreshToken: string;
  };
  error?: ApiError;
}
```

#### `POST /api/auth/register`

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ó–∞–ø—Ä–æ—Å:**

```typescript
{
	name: string;
	email: string;
	password: string;
	termsAccepted: boolean;
}
```

#### `POST /api/auth/refresh`

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞

#### `POST /api/auth/logout`

–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

#### `GET /api/user/profile`

–ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üîê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏

API –∫–ª–∏–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω–∞–º–∏:

- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:** –¢–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞:** –¢–æ–∫–µ–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
- **–û—á–∏—Å—Ç–∫–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ logout

```typescript
import { TokenManager } from '$lib/api';

// –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ç–æ–∫–µ–Ω
const token = TokenManager.getToken();

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å
const isValid = TokenManager.isTokenValid(token);

// –û—á–∏—Å—Ç–∏—Ç—å —Ç–æ–∫–µ–Ω—ã
TokenManager.clearTokens();
```

## üéØ –î–µ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–µ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞:

**URL:** `/api-demo`

–ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –º–æ–∂–Ω–æ:

- –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ API –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

## ‚ö° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –º–æ–∫-—Å–µ—Ä–≤–µ—Ä–∞

### –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–µ—Ç–∏

```typescript
// –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 800ms)
const delay = (ms: number = 800): Promise<void> =>
	new Promise((resolve) => setTimeout(resolve, ms));
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è email –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —É—Å–ª–æ–≤–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### JWT —Ç–æ–∫–µ–Ω—ã (–º–æ–∫)

- –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ JWT
- –•—Ä–∞–Ω–µ–Ω–∏–µ userId –≤ payload
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```typescript
// –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫
{
  message: string;
  code?: string;
  field?: string; // –¥–ª—è field-specific –æ—à–∏–±–æ–∫
}
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

```typescript
// –í client.ts
export const apiClient = new ApiClient('https://api.rlarena.com', false);
//                                     ‚Üë baseURL              ‚Üë useMockServer
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –º–∞—Å—Å–∏–≤ `mockUsers` –≤ `mockServer.ts`:

```typescript
const mockUsers: MockUser[] = [
	{
		id: '1',
		name: '–í–∞—à–µ –ò–º—è',
		email: 'your@email.com',
		password: 'YourPassword123!'
		// ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
	}
];
```

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞

1. **–î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã –≤ `types.ts`:**

```typescript
export interface NewRequest {
	field: string;
}
```

2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å handler –≤ `mockServer.ts`:**

```typescript
export const mockApiHandlers = {
	// ... existing handlers
	newEndpoint: async (request: NewRequest): Promise<ApiResponse<SomeType>> => {
		// implementation
	}
};
```

3. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –≤ `client.ts`:**

```typescript
async newMethod(data: NewRequest): Promise<ApiResponse<SomeType>> {
  return await this.makeRequest<SomeType>('/api/new-endpoint', {
    method: 'POST',
    body: data
  });
}
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/api-demo` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.

## üìù –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API

–ö–æ–≥–¥–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤ —Ä–µ–∞–ª—å–Ω—ã–π backend:

1. –ò–∑–º–µ–Ω–∏—Ç–µ `useMockServer` –Ω–∞ `false` –≤ `client.ts`
2. –£–∫–∞–∂–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `baseUrl`
3. API –∫–ª–∏–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã
4. –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üîç –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ú–æ–∫-—Å–µ—Ä–≤–µ—Ä –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤ –∫–æ–Ω—Å–æ–ª—å:

```
[MOCK API] POST /api/auth/login { email: "ivan@example.com", password: "..." }
```

–≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.
